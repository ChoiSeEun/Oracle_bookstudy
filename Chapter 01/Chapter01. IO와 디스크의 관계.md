# 1. 오라클과 디스크
- 오라클은 DBMS(DataBase Management System)
	- 오라클 입장에서 DataBase = 디스크에 저장하고 관리하는 데이터 
- 즉, 디스크에서 데이터를 읽어와서 처리하고 처리가 끝나면 다시 디스크에 저장해야 한다.
=> 오라클과 디스크는 뗄 수 없는 관계 !
## (1) 디스크의 동작
- 디스크에서 원하는 데이터를 읽거나 쓰기 위해서는 아래와 같은 과정을 거쳐야 한다. 
	- `탐색(seek)` : 원하는 데이터가 저장되기 시작한 첫 머리를 찾는 과정
	- `회전 대기(rotational latency)`: 디스크가 회전해서 원하는 위치가 다가올 때까지 기다리는 과정 

## (2) 디스크 읽기/쓰기 소요 시간
- 디스크는 기계 동작이 필요하므로 ms 단위의 시간이 필요하다.
- 메모리 접근 시간보다 훨씬 많이 시간이 소요되므로, 디스크 I/O시간을 최대한 줄여야 오라클도 빠른 동작이 가능하다.
	- 메모리는 전기 신호로 작업하기 때문에 ns 단위로 수행이 가능하다.
	- `IOPS(I/O Per Sec)` 가 DBMS 성능에 중요한 지표가 된다. 
- 디스크 I/O의 소요 시간
	- 탐색 시간 + 회전 대기 시간 + 데이터 전송 시간 
# 2. 액세스 방법
## (1) Sequential Access
- 특정 범위의 데이터를 순차적으로 전부 액세스하는 것 
- 데이터베이스의 경우, Table Full Scan 시 Sequential Access가 발생 
## (2) Random Access
- 필요한 부분만 띄엄띄엄 액세스하는 것 
- 디스크I/O 동작과 연결해서 본다면,
	- 데이터를 접근할 때마다 탐색 + 회전 대기로 인한 시간이 소요된다. 
## (3) Oracle 의 Sequential
- 오라클에서 액세스 방법을 표현하는 방법은 아래와 같다.
	- Sequential Access : db file scattered read
	- Random Access : db file sequential read 
- 두 개의 표현이 반대로 되어 있다는 생각이 들만큼 어색한 표현인데, 그 의미는 아래와 같다.
	- Sequential Access
		- 순차적으로 접근하는 방법
		- 여러 블록을 한꺼번에 빠짐없이 읽어옴
		- 읽어오는 블록들은 메모리 상에 연속되지 않은 형태로 놓임 -> `scattered`
	- Random Access
		- 필요한 부분만 읽어오므로, 한 번에 한 개의 데이터 블록만 읽어옴 
		- 한 개의 데이터 블록은 메모리 공간에 반드시 연속적으로 놓임 -> `sequential`

# 3. 인덱스
- 데이터를 빠르게 찾기 위한 색인
- 검색의 키 값과 그 키의 주소가 기록됨
	- 키의 주소 = 데이터가 들어가 있는 위치 = ROWID
## (1) 사용예시
```sql
SELECT "소속 회사"
FROM "개인 데이터"
WHERE "이름" = "래리";
```
1. "이름"이 기록되어 있는 인덱스 탐색하기
2. 인덱스를 탐색하여 "래리" 의 주소 찾기 
3. 가져온 주소로 디스크에서 데이터 읽어오기
4. 읽어온 데이터 중 원하는 "소속 회사" 데이터를 찾기 
## (2) 인덱스 구조
- 위의 예시에서 언급되어 있는 것 처럼 결국 인덱스도 "탐색" 과정이 필요하다.
- 그렇지만, 인덱스가 매우 커지더라도 테이블 탐색처럼 시간이 많이 소요되지 않는다.
- 인덱스는 **계층**으로 구성이 되기 때문이다.
- 즉, **트리 구조**이며 보통 DBMS의 인덱스는 **B+Tree** 로 구성되어 있다. 
- 계층 구조의 장점은 필요한 부분만 읽으면 된다는 것이다. 
## (3) 성능
- 하지만, 인덱스가 무조건 좋은 성능을 보장하는 것은 아니다. 
- 아래와 같은 말이 있다.
> 인덱스를 사용하는 것이 유리한 경우는 필요한 데이터가 전체 데이터의 15% 미만인 경우이다. 

- 무조건 맞는 말은 아니지만, 또 틀린 말만은 아니다.
- 그 이유는 **디스크의 랜덤 액세스는 데이터를 읽는 효율성이 시퀀셜 액세스 보다 떨어지기 때문**이다. 
	- 랜덤 액세스는 탐색 + 회전 대기에 비교적 많은 시간이 소요되기 때문이다.
- 따라서, 일정 크기 이상의 데이터를 읽는다면 시퀀셜 액세스로 테이블을 풀 스캔하는 편이 빠르다.
- 그러나 15% 라는 값은 절대적인 것이 아니며, 실제 DBMS 동작에서는 다양한 상황을 고려해야 한다.
	- 캐시에 데이터가 보관되어 있는 경우
	- 한 개의 블록에 여러 로우의 데이터가 보관되어 있는 경우
	- 1회의 I/O로 많은 데이터를 읽을 수 있는 경우
	- 인덱스의 데이터를 디스크에서 읽어와야 하는 경우 