# 1. SQL 분석
- SQL은 처리 방법을 기술하지 않는 비절차적 언어
	- 데이터의 조건이나 관계만을 기술 
- 따라서, SQL문을 수행하기 위해서는 처리 방법을 생각해야 하는데 이를 위해 SQL 분석이 필요 
- 이는 **Optimizer**가 담당 
	- SQL문을 분해해서 어떤 요소로 구성되어 있는지를 조사하고,
    - 어떤 식으로 처리할 것인지를 결정 
# 2. 비용 계산
- Optimizer가 처리 방법을 결정하는 알고리즘에는 크게 2가지가 존재
	- Rule Based Optimizer
    - Cost Based Optimizer
- 오라클 10g부터는 Rule Based Optimizer를 지원하지 않으며, 대부분의 DBMS들도 Cost 기반 옵티마이저를 채택
- 비용 기반?
	- 비용 : 처리에 필요하다고 생각되는 시간 또는 자원 사용량 
    - 처리 시간이나 I/O 횟수가 가장 작다고 생각되는 처리 방법을 채택
## (1) 통계 정보
- 비용을 예측하기 위해서 사용되는 기초 수치
- 테이블, 컬럼 등의 통계 정보를 사용
	- 로우 및 블록의 정보
    - 컬럼 값 및 데이터 분포 정보
    - 인덱스의 깊이, 인덱스 블록의 수, 인덱스와 데이터 블록의 관계 정보
- 통계 정보 외에도 옵티마이저들은 다양한 정보를 사용해서 비용을 예측
	- SQL문 정보
    - 초기화 파라미터 : 단일 I/O로 읽어올 수 있는 블록 수 등
    - 시스템 통계 : I/O, CPU의 성능 및 사용률 정보 등
- 대부분의 통계 정보는 사전에 수집되어 저장되어 있음 
	- 통계 정보를 기반으로 비용이 예측되므로 적절한 통계 정보 수집이 매우 중요
    - 정기적으로 통계 정보를 수집하는 것 외에도, 시스템에 따라 적절한 시점에 수집하는 것이 중요함
    - 일반적으로 데이터양이 많은 시점에 통계 정보를 수집하는 것이 비교적 적절한 실행 계획을 만드는데 도움이 됨 
## (2) 최적의 실행계획 판단
- 기본적으로는 모든 처리 방법의 비용을 계산해서 비교
- 하지만, 모든 판단이 올바른 것은 아님
	- 선택할 수 있는 실행 계획이 너무 많거나,
    - 실행 계획은 예측치에 불과하기 때문 
# 3. 공유 풀
- SGA에 존재 
- 실행 계획을 캐싱하여, SQL 분석 작업을 줄임 
	- hard parsing : 해당 SQL문의 실행 계획이 Library Cache에 존재하지 않는 경우
    - soft parsing : 해당 SQL문의 실행 계획이 Library Cache에 존재하는 경우 
- 해시 함수를 사용하여 SQL문의 동일 여부를 판단
	- SQL 구문을 해시 함수에 입력하여 ID를 생성
    - 문자열 자체를 해시 함수에 입력하므로 대/소문자, 공백 등만 달라져도 다른 SQL이라 판단됨
    - 검색 조건의 값이 달라도 동일한 SQL로 판단하고 싶다면 <u>바인드 변수</u> 사용 
## ➀ Dictionary Cache
- 주로 SQL의 실행에 필요한 메타 정보를 보관 
- 통계 정보의 캐시 등 
## ➁ Library Cache
- 실행 계획 등의 SQL 정보 