### keyword
- 테이블스페이스 (tablespace)
- 세그먼트 (segment)
- 익스텐트 (extent)
- 블록 (block)
- 데이터 파일(dtatfile) 
# 1. 가변 길이 데이터
- 저장되는 데이터들은 길이가 일정하지 않을뿐더러, 수정이 될 수가 있음
- 단순하게 데이터를 차례대로 넣는식으로 구현하게 되면 크기 변경 및 동시 처리에 문제가 발생하게 됨
- 또한, 어떤 테이블이 어떤 데이터를 가졌는지에 대한 정보가 데이터 갯수만큼 필요하게 됨 
## 필요한 조건
- 관리 및 I/O의 효율을 고려해 공간을 어느 정도의 크기로 뭉쳐서 할당한다.
- 데이터 변경에 필요한 공간을 확보한다.
- 비어 있는 공간을 관리한다.
# 2. 오라클의 데이터 구조
- 논리적 구조 : OS에서는 식별할 수 없는 오라클 내부의 구조
- 물리적 구조 : OS에서 보이는 구조 
## 논리적 구조
- 테이블 스페이스
	- 테이블이나 인덱스 등을 넣기 위한 공간
	- 한 개 이상의 세그먼트를 보관 가능
- 세그먼트
	- 테이블이나 인덱스 등의 데이터를 보관하는 것
	- 한 개 이상의 익스텐트로 구성
- 익스텐트
	- 관리를 쉽게 하기 위한 데이터의 집합
	- 연속된 오라클 블록으로 구성
- 오라클 블록
	- 물리 구조인 OS 블록으로 구성
	- 한 건 이상의 데이터가 보관 

<img src="https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F1364E5174BBAFC3E7E" width="350">

### ① 블록
- 블록을 관리하기 위한 공간인 <u>블록헤더</u>가 존재
- 블록의 아래에서부터 데이터가 저장됨
	- 블록헤더에 저장되는 메타정보는 위에서부터 저장됨
- 어느정도 블록이 사용되면, 데이터를 추가 입력하지 않고 빈 공간을 확보해둠
	- 데이터 변경에 대비하기 위함
    - 오라클은 `PCTFREE` 의 세그먼트 파라미터로 빈 공간의 임계치를 관리하고, 사용한 공간의 임계치는 `PCTUSED` 의 파라미터로 관리
    - 즉, `PCTFREE`라는 임게치에 도달하면 해당  블록에 입력하는 것을 멈추고, `PCTUSED`보다 낮아지면 비어 있는 블록이라고 인식하게 됨
- 데이터가 블록보다 긴 경우는 블록 여러 개에 걸쳐서 데이터를 입력
- 컬럼에 LOB가 있다면 LOB만을 위한 위한 장소에 별도 보관하기도 함 

### ② 익스텐트
- 테이블이 여러 개의 블록으로만 관리된다면
	- 한 개의 테이블이 여러 장소에 분산된 상태가 되며,
    - 몇 십만에 가까운 블록을 관리하는 사태가 발생
- 이를 위해, 연속된 블록의 집합인 **익스텐트** 구조를 도입
	- 여러 개의 데이터 파일에 걸쳐서 존재할 수 없음 
- 각 익스텐트의 첫 위치와 블록의 개수만으로 데이터 관리 가능
- 데이터를 한 번에 읽어올 수 있어 풀 스캔 성능 향상 가능 

### ③ 세그먼트
- 익스텐트의 집합 
- 여러 개의 익스텐트로 구성되나, 구성되는 익스텐트들은 연속되지는 않음 
- 빈 블록은 세그먼트 단위로 관리
	- 세그먼트 안에 공간이 모자르면 세그먼트에 새로운 익스텐트를 추가해서 빈 블록을 늘림 
- 테이블스페이스에 소속되기 때문에 테이블스페이스 여러 개에 걸쳐서 존재할 수 없음 

### ④ 테이블스페이스
- 세그먼트를 분류해서 보관하기 위한 상자
- 한 개 이상의 데이터 파일로 구성
